<div>
    <mat-card class="configCard">
        <mat-card-header>
            <mat-card-title> Configuration </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <h4>Select a Game</h4>
            <mat-form-field appearance="fill">
                <mat-label>Game Name</mat-label>
                <mat-select (selectionChange)="selectedGame($event.value)">
                    <mat-option *ngFor="let game of gameList" [value]="game">
                        {{game}}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <div *ngIf="mode == 'changed'">
                <form  [formGroup]="coreForm"><br />
                    <section class="example-section">
                        <div>【 Core 】</div><br />
                        <ol>
                            <div *ngFor="let coreOption of coreOptions; let i = index">
                                <li>
                                    <mat-checkbox class="example-margin"
                                        *ngIf="coreOption.default_value == 'True'; else elseTmp"
                                        (change)="changeCheckBox('[core]', coreForm, coreFormControlName[i], $event.checked)"
                                        [formControlName]="coreFormControlName[i]"> {{coreOption.GAcolumn}}
                                    </mat-checkbox>
                                    <ng-template #elseTmp>
                                        <mat-label>{{coreOption.GAcolumn}}: </mat-label>
                                        <mat-form-field>
                                            <input type="text" matInput [formControlName]="coreFormControlName[i]" (change)="changeInput('[core]', coreOption.GAcolumn, coreOption.default_value, $event.target.value)">
                                        </mat-form-field>
                                    </ng-template>
                                </li>
                            </div>
                        </ol>
                    </section>
                </form>
    
    
                <form  [formGroup]="videoForm">
                    <section class="example-section">
                        <div>【 Video 】</div><br />
                        <ol>
                            <div *ngFor="let videoOption of videoOptions; let i = index">
                                <li>
                                    <mat-label>{{videoOption.GAcolumn}}: </mat-label>
                                    <mat-form-field>
                                        <input type="text" matInput [formControlName]="videoFormControlName[i]" (change)="changeInput('[video]', videoOption.GAcolumn, videoOption.default_value, $event.target.value)">
                                    </mat-form-field>
                                </li>
                            </div>
                        </ol>
                    </section>
                </form>
    
                <form  [formGroup]="audioForm">
                    <section class="example-section">
                        <div>【 Audio 】</div><br />
                        <ol>
                            <div *ngFor="let audioOption of audioOptions; let i = index">
                                <li>
                                    <mat-label>{{audioOption.GAcolumn}}: </mat-label>
                                    <mat-form-field>
                                        <input type="text" matInput formControlName="audioDelay" (change)="changeInput('[audio]', audioOption.GAcolumn, audioOption.default_value, $event.target.value)">
                                    </mat-form-field>
                                </li>
                            </div>
                        </ol>
                    </section>
                </form>
    
                <form   [formGroup]="filterForm">
                    <section class="example-section">
                        <div>【 Filter 】</div><br />
                        <ol>
                            <div *ngFor="let filterOption of filterOptions">
                                <li>
                                    <mat-label>{{filterOption.GAcolumn}}: </mat-label>
                                    <mat-form-field>
                                        <input type="text" matInput formControlName="filterSP" (change)="changeInput('[filter]', filterOption.GAcolumn, filterOption.default_value, $event.target.value)">
                                    </mat-form-field>
                                </li>
                            </div>
                        </ol>
                    </section>
                </form>
    
                <form   [formGroup]="gaServerForm">
                    <section class="example-section">
                        <div>【 ga-server-event-driven 】</div><br />
                        <ol>
                            <div *ngFor="let gaServerEventDrivenOption of gaServerEventDrivenOptions; let i = index">
                                <li>
                                    <mat-checkbox class="example-margin"
                                        *ngIf="gaServerEventDrivenOption.default_value == 'true'; else elseTmp"  
                                        (change)="changeCheckBox(gaServerForm, '[ga-server-event-driven]', gaServerFormControlName[i], $event.checked)"
                                        [formControlName]="gaServerFormControlName[i]">
                                        {{gaServerEventDrivenOption.GAcolumn}}
                                    </mat-checkbox>
                                    <ng-template #elseTmp>
                                        <mat-label>{{gaServerEventDrivenOption.GAcolumn}}: </mat-label>
                                        <mat-form-field>
                                            <input type="text" matInput [formControlName]="gaServerFormControlName[i]"
                                            (change)="changeInput('[ga-server-event-driven]', gaServerEventDrivenOption.GAcolumn, gaServerEventDrivenOption.default_value, $event.target.value)">
                                        </mat-form-field>
                                    </ng-template>
                                </li>
                            </div>
                        </ol>
                    </section>
                </form>
    
                <form   [formGroup]="gaClientForm">
                    <section class="example-section">
                        <div>【 ga-client 】</div><br />
                        <ol>
                            <div *ngFor="let gaClientOption of gaClientOptions; let i = index">
                                <li>
                                    <mat-label>{{gaClientOption.GAcolumn}}:</mat-label>
                                    <mat-form-field>
                                        <input type="text" matInput [formControlName]="gaClientFormControlName[i]"
                                        (change)="changeInput('[ga-client]',gaClientOption.GAcolumn, gaClientOption.default_value, $event.target.value)">
                                    </mat-form-field>
                                </li>
                            </div>
                        </ol>
                    </section>
                </form>
            </div>

        </mat-card-content>
        <mat-card-actions> 
            <a routerLink="/provider">
                <button mat-stroked-button type="cancel" class="button">Cancel</button>
            </a>
            <button  *ngIf="mode == 'changed'" mat-stroked-button type="submit" class="button" (click)="modifyConfigGame()">Change</button>
        </mat-card-actions>
    </mat-card>
</div>